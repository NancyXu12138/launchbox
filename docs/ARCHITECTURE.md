# ğŸ—ï¸ ç³»ç»Ÿæ¶æ„æ–‡æ¡£

## ğŸ“Š æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‰ç«¯å±‚ (Frontend Layer)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  Chat Page   â”‚  â”‚ Command Cntr â”‚  â”‚ Actions Page â”‚             â”‚
â”‚  â”‚  (å¯¹è¯ç•Œé¢)   â”‚  â”‚  (æŒ‡æŒ¥ä¸­å¿ƒ)   â”‚  â”‚  (åŠ¨ä½œåº“)     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚         â”‚                 â”‚                 â”‚                      â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                           â”‚                                        â”‚
â”‚                React + TypeScript + MUI                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚ HTTP/WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åç«¯å±‚ (Backend Layer)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚               æ§åˆ¶å±‚ (Controller Layer)                    â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚     â”‚
â”‚  â”‚  â”‚ Intent       â”‚  â”‚ Tool Router  â”‚  â”‚ Workflow     â”‚   â”‚     â”‚
â”‚  â”‚  â”‚ Classifier   â”‚  â”‚ & Executor   â”‚  â”‚ Engine       â”‚   â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                           â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚            æœåŠ¡å±‚ (Service Layer)                          â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚     â”‚
â”‚  â”‚  â”‚  Action Executor Service                         â”‚    â”‚     â”‚
â”‚  â”‚  â”‚  - Calculator (æ•°å­¦è®¡ç®—)                          â”‚    â”‚     â”‚
â”‚  â”‚  â”‚  - Text Processor (æ–‡æœ¬å¤„ç†)                      â”‚    â”‚     â”‚
â”‚  â”‚  â”‚  - JSON Processor (JSONå¤„ç†)                      â”‚    â”‚     â”‚
â”‚  â”‚  â”‚  - DateTime Processor (æ—¥æœŸæ—¶é—´)                  â”‚    â”‚     â”‚
â”‚  â”‚  â”‚  - Google Search (æœç´¢)                           â”‚    â”‚     â”‚
â”‚  â”‚  â”‚  - Sentiment Analysis (æƒ…æ„Ÿåˆ†æ)                  â”‚    â”‚     â”‚
â”‚  â”‚  â”‚  - Game Classification (æ¸¸æˆåˆ†ç±»)                â”‚    â”‚     â”‚
â”‚  â”‚  â”‚  - Image Generation (å›¾åƒç”Ÿæˆ)                    â”‚    â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚     â”‚
â”‚  â”‚                                                            â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚     â”‚
â”‚  â”‚  â”‚ OpenAI       â”‚  â”‚ Event        â”‚  â”‚ Image        â”‚   â”‚     â”‚
â”‚  â”‚  â”‚ Service      â”‚  â”‚ Planning     â”‚  â”‚ Service      â”‚   â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                     â”‚
â”‚                   FastAPI + Python 3.13                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ¨¡å‹å±‚ (AI Services Layer)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   OpenAI     â”‚  â”‚    Dify      â”‚  â”‚   Compass    â”‚             â”‚
â”‚  â”‚     API      â”‚  â”‚  Image API   â”‚  â”‚     API      â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ æ ¸å¿ƒè®¾è®¡åŸåˆ™

### 1. å•ä¸€æ•°æ®æº (Single Source of Truth)

**é—®é¢˜**ï¼šå‰åç«¯ Action å®šä¹‰ä¸ä¸€è‡´ï¼Œå¯¼è‡´ç»´æŠ¤å›°éš¾ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
```
shared/
  â”œâ”€â”€ action-types.ts        # ç»Ÿä¸€çš„ç±»å‹å®šä¹‰
  â””â”€â”€ action-library.ts      # ç»Ÿä¸€çš„ Action åº“
```

æ‰€æœ‰ Action å®šä¹‰éƒ½åœ¨ `shared/action-library.ts` ä¸­ï¼Œå‰åç«¯å…±äº«åŒä¸€ä»½æ•°æ®ã€‚

### 2. ç®€åŒ–æ„å›¾åˆ†ç±»ï¼ˆ4ç§ç±»å‹ï¼‰

**æ—§ç³»ç»Ÿ**ï¼š8ç§æ„å›¾ç±»å‹ï¼Œæ¦‚å¿µæ··ä¹±
```typescript
'text_answer' | 'need_tool' | 'need_workflow' | 'event_planning' | 
'image_generation' | 'knowledge_search' | 'translation' | 'code_explanation'
```

**æ–°ç³»ç»Ÿ**ï¼š4ç§æ ¸å¿ƒæ„å›¾ç±»å‹
```typescript
'text_answer'    // ç›´æ¥æ–‡æœ¬å›ç­”ï¼ˆåŒ…å«ç¿»è¯‘ã€ä»£ç è§£é‡Šç­‰ï¼‰
'tool_call'      // å•å·¥å…·è°ƒç”¨ï¼ˆæŒ‡å®šå…·ä½“å·¥å…·IDï¼‰
'workflow'       // å¤šæ­¥éª¤å·¥ä½œæµ
'clarify'        // ä¿¡æ¯è¡¥é½
```

### 3. åŒå±‚æ„å›¾è¯†åˆ«æœºåˆ¶

```
ç”¨æˆ·è¾“å…¥
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¿«é€Ÿå…³é”®è¯æ£€æµ‹       â”‚ (0ms, é›¶æˆæœ¬)
â”‚ confidence >= 0.8?  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     YES       NO
      â”‚         â”‚
      â”‚         â–¼
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  â”‚ LLMç²¾ç¡®åˆ†ç±»  â”‚ (200ms, ä½æˆæœ¬)
      â”‚  â”‚ gpt-4.1-nanoâ”‚
      â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚         â”‚
      â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è¿”å›æ„å›¾ç»“æœ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¼˜åŠ¿**ï¼š
- âœ… é«˜ç½®ä¿¡åº¦åœºæ™¯é›¶å»¶è¿Ÿ
- âœ… é™ä½LLMè°ƒç”¨æˆæœ¬
- âœ… ä¿æŒé«˜å‡†ç¡®ç‡

---

## ğŸ“ ç›®å½•ç»“æ„

### å‰ç«¯ (src/)

```
src/
â”œâ”€â”€ components/              # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ ActionResultDisplay.tsx
â”‚   â”œâ”€â”€ BottomTodoPanel.tsx
â”‚   â””â”€â”€ MarkdownRenderer.tsx
â”‚
â”œâ”€â”€ modules/                 # åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ chat/               # å¯¹è¯æ¨¡å—
â”‚   â”‚   â””â”€â”€ ChatPage.tsx
â”‚   â”œâ”€â”€ command-center/     # æŒ‡æŒ¥ä¸­å¿ƒ
â”‚   â”‚   â””â”€â”€ CommandCenterPage.tsx
â”‚   â”œâ”€â”€ actions/            # åŠ¨ä½œåº“
â”‚   â”‚   â””â”€â”€ ActionsPage.tsx
â”‚   â””â”€â”€ app/                # åº”ç”¨ä¸»æ¡†æ¶
â”‚       â”œâ”€â”€ App.tsx
â”‚       â””â”€â”€ SettingsDialog.tsx
â”‚
â””â”€â”€ services/               # æœåŠ¡å±‚
    â”œâ”€â”€ intentClassifier.ts         # â­ æ„å›¾åˆ†ç±»ï¼ˆé‡æ„ï¼‰
    â”œâ”€â”€ actionExecutorService.ts    # Action æ‰§è¡Œ
    â”œâ”€â”€ commandService.ts           # æŒ‡æŒ¥ä¸­å¿ƒæœåŠ¡
    â”œâ”€â”€ backendApiService.ts        # åç«¯APIè°ƒç”¨
    â”œâ”€â”€ simpleTodoGenerator.ts      # Todo ç”Ÿæˆ
    â”œâ”€â”€ todoExecutionService.ts     # Todo æ‰§è¡Œ
    â”œâ”€â”€ contextualReasoning.ts      # ä¸Šä¸‹æ–‡æ¨ç†
    â””â”€â”€ knowledgeBase.ts            # çŸ¥è¯†åº“
```

### åç«¯ (backend/)

```
backend/
â”œâ”€â”€ main.py                  # FastAPI ä¸»ç¨‹åº
â”œâ”€â”€ config.py                # é…ç½®ç®¡ç†
â”œâ”€â”€ requirements.txt         # Python ä¾èµ–
â”‚
â””â”€â”€ services/
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ action_executor_service.py   # â­ Action æ‰§è¡Œï¼ˆé‡æ„ï¼‰
    â”œâ”€â”€ openai_service.py            # OpenAI API
    â”œâ”€â”€ event_planning_service.py    # æ´»åŠ¨ç­–åˆ’
    â””â”€â”€ gpt_image_service.py         # å›¾åƒç”Ÿæˆ
```

### å…±äº«å®šä¹‰ (shared/)

```
shared/
â”œâ”€â”€ action-types.ts          # â­ ç»Ÿä¸€çš„ç±»å‹å®šä¹‰
â””â”€â”€ action-library.ts        # â­ ç»Ÿä¸€çš„ Action åº“
```

---

## ğŸ”„ ä¸»è¦æµç¨‹

### 1. å¯¹è¯å¤„ç†æµç¨‹

```
ç”¨æˆ·è¾“å…¥
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ„å›¾åˆ†ç±»        â”‚  intentClassifier.ts
â”‚  (4ç§ç±»å‹)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â†’ text_answer â”€â”€â†’ LLM ç›´æ¥å›ç­”
         â”‚
         â”œâ”€â†’ tool_call â”€â”€â”€â”€â†’ æ‰§è¡Œå•ä¸ª Action
         â”‚                   (calculator, image_gen ç­‰)
         â”‚
         â”œâ”€â†’ workflow â”€â”€â”€â”€â”€â†’ ç”Ÿæˆ Todo List
         â”‚                   è‡ªåŠ¨æ‰§è¡Œå¤šæ­¥éª¤
         â”‚
         â””â”€â†’ clarify â”€â”€â”€â”€â”€â”€â†’ å¼¹å‡ºè¡¨å•æ”¶é›†ä¿¡æ¯
```

### 2. Action æ‰§è¡Œæµç¨‹

```
å‰ç«¯è¯·æ±‚
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åç«¯ Action Executor       â”‚
â”‚  action_executor_service.pyâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â†’ Calculator â”€â”€â”€â”€â”€â”€â”€â”€â†’ æ•°å­¦è®¡ç®—
         â”œâ”€â†’ Text Processor â”€â”€â”€â”€â†’ æ–‡æœ¬å¤„ç†
         â”œâ”€â†’ JSON Processor â”€â”€â”€â”€â†’ JSON æ“ä½œ
         â”œâ”€â†’ DateTime Processor â”€â†’ æ—¥æœŸæ—¶é—´
         â”œâ”€â†’ Google Search â”€â”€â”€â”€â”€â†’ æœç´¢ (Mock)
         â”œâ”€â†’ Sentiment Analysis â”€â†’ æƒ…æ„Ÿåˆ†æ (LLM)
         â”œâ”€â†’ Game Classification â”€â†’ æ¸¸æˆåˆ†ç±» (LLM)
         â””â”€â†’ Image Generation â”€â”€â”€â†’ å›¾åƒç”Ÿæˆ (Dify)
```

### 3. Workflow æ‰§è¡Œæµç¨‹

```
ç”¨æˆ·éœ€æ±‚
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”Ÿæˆ Todo List â”‚  simpleTodoGenerator.ts
â”‚ (LLM)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‰§è¡Œ Todo      â”‚  todoExecutionService.ts
â”‚ (é€æ­¥æ‰§è¡Œ)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â†’ Step 1: è°ƒç”¨ Action A
        â”œâ”€â†’ Step 2: è°ƒç”¨ Action B
        â”œâ”€â†’ Step 3: LLM æ€»ç»“
        â””â”€â†’ ...
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¿”å›æœ€ç»ˆç»“æœ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ å‰åç«¯é€šä¿¡åè®®

### Action æ‰§è¡Œè¯·æ±‚

```typescript
POST /api/execute-action

Request:
{
  "action_id": "calculator",           // Action ID
  "action_name": "æ•°å­¦è®¡ç®—å™¨",          // Action åç§°
  "action_type": "code_execution",     // Action ç±»å‹
  "parameters": {                      // æ‰§è¡Œå‚æ•°
    "expression": "2 + 2"
  }
}

Response (Success):
{
  "success": true,
  "type": "calculation",
  "data": {
    "expression": "2 + 2",
    "result": 4
  },
  "message": "è®¡ç®—ç»“æœ: 4"
}

Response (Error):
{
  "success": false,
  "error": "è¡¨è¾¾å¼åŒ…å«éæ³•å­—ç¬¦"
}
```

### èŠå¤©è¯·æ±‚

```typescript
POST /api/chat

Request:
{
  "messages": [
    {"role": "user", "content": "ä½ å¥½"},
    {"role": "assistant", "content": "ä½ å¥½ï¼æœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ ï¼Ÿ"}
  ],
  "temperature": 0.7,
  "max_tokens": 2000,
  "model": "gpt-4"  // å¯é€‰
}

Response:
{
  "success": true,
  "content": "æˆ‘å¾ˆå¥½ï¼Œè°¢è°¢ï¼",
  "usage": {
    "prompt_tokens": 20,
    "completion_tokens": 10,
    "total_tokens": 30
  }
}
```

---

## ğŸ”§ æŠ€æœ¯æ ˆ

### å‰ç«¯

| æŠ€æœ¯ | ç”¨é€” | ç‰ˆæœ¬ |
|-----|------|------|
| React | UIæ¡†æ¶ | 18+ |
| TypeScript | ç±»å‹å®‰å…¨ | 5+ |
| MUI (Material-UI) | ç»„ä»¶åº“ | 5+ |
| Vite | æ„å»ºå·¥å…· | 5+ |

### åç«¯

| æŠ€æœ¯ | ç”¨é€” | ç‰ˆæœ¬ |
|-----|------|------|
| Python | åç«¯è¯­è¨€ | 3.13 |
| FastAPI | Webæ¡†æ¶ | Latest |
| OpenAI SDK | LLMè°ƒç”¨ | Latest |
| AsyncIO | å¼‚æ­¥å¤„ç† | Built-in |

### AI æœåŠ¡

| æœåŠ¡ | ç”¨é€” | å¤‡æ³¨ |
|-----|------|------|
| OpenAI API (Compass) | LLMå¯¹è¯ã€åˆ†æ | ä¸»è¦æ¨¡å‹ |
| Dify API | å›¾åƒç”Ÿæˆ | Fluxæ¨¡å‹ |

---

## ğŸ“ é‡è¦é…ç½®

### ç¯å¢ƒå˜é‡ (backend/.env)

```bash
# OpenAIé…ç½®
OPENAI_API_KEY=your_api_key
OPENAI_BASE_URL=https://api.compass.com/v1
OPENAI_MODEL=gpt-4

# å‰ç«¯URL
FRONTEND_URL=http://localhost:5173

# åç«¯é…ç½®
HOST=0.0.0.0
PORT=8001
DEBUG=True
```

### æ¨¡å‹é…ç½® (src/services/modelConfig.ts)

```typescript
{
  'intent_classification': {
    model: 'gpt-4.1-nano',      // å¿«é€Ÿã€ä½æˆæœ¬
    temperature: 0.3,
    max_tokens: 500
  },
  'todo_generation': {
    model: 'gpt-4',             // éœ€è¦è¾ƒå¼ºæ¨ç†èƒ½åŠ›
    temperature: 0.5,
    max_tokens: 2000
  },
  'creative_writing': {
    model: 'gpt-4',
    temperature: 0.8,           // æ›´æœ‰åˆ›æ„
    max_tokens: 4000
  }
}
```

---

## ğŸš€ éƒ¨ç½²è¯´æ˜

### æœ¬åœ°å¼€å‘

1. **å¯åŠ¨åç«¯**
```bash
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
python run.py
```

2. **å¯åŠ¨å‰ç«¯**
```bash
npm install
npm run dev
```

### ç”Ÿäº§éƒ¨ç½²

1. **å‰ç«¯æ„å»º**
```bash
npm run build
# äº§ç‰©åœ¨ dist/ ç›®å½•
```

2. **åç«¯éƒ¨ç½²**
```bash
# ä½¿ç”¨ uvicorn
uvicorn main:app --host 0.0.0.0 --port 8001

# æˆ–ä½¿ç”¨ gunicorn + uvicorn workers
gunicorn main:app -w 4 -k uvicorn.workers.UvicornWorker
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥ä¼˜åŒ–æ–¹å‘

### P1ï¼ˆçŸ­æœŸï¼‰

1. **ä¸Šä¸‹æ–‡å‹ç¼©**
   - å®ç°å…³é”®ä¿¡æ¯æå–
   - æ§åˆ¶ context å¤§å°åœ¨ 8K tokens ä»¥å†…

2. **Clarify ä½“ç³»å®Œå–„**
   - åŠ¨æ€è¡¨å•ç”Ÿæˆ
   - æ™ºèƒ½ä¿¡æ¯è¡¥é½

3. **Event Planner æ‹†åˆ†**
   - æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹ Action
   - å®ç°çµæ´»çš„æ–¹æ¡ˆé€‰æ‹©æœºåˆ¶

### P2ï¼ˆä¸­æœŸï¼‰

1. **æ€§èƒ½ä¼˜åŒ–**
   - æ·»åŠ å“åº”ç¼“å­˜
   - å®ç°æ‰¹é‡ Action è°ƒç”¨
   - æ·»åŠ é‡è¯•æœºåˆ¶

2. **ç›‘æ§å’Œæ—¥å¿—**
   - æ·»åŠ è¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—
   - å®ç°é”™è¯¯è¿½è¸ª
   - æ€§èƒ½ç›‘æ§

3. **æµ‹è¯•è¦†ç›–**
   - å•å…ƒæµ‹è¯•
   - é›†æˆæµ‹è¯•
   - E2Eæµ‹è¯•

### P3ï¼ˆé•¿æœŸï¼‰

1. **æ•°æ®æŒä¹…åŒ–**
   - å¯¹è¯å†å²ä¿å­˜åˆ°æ•°æ®åº“
   - Workflow æ‰§è¡Œå†å²
   - ç”¨æˆ·åå¥½è®¾ç½®

2. **å¤šæ¨¡å‹æ”¯æŒ**
   - æ”¯æŒåˆ‡æ¢ä¸åŒçš„ LLM
   - æ¨¡å‹è·¯ç”±ï¼ˆæ ¹æ®ä»»åŠ¡é€‰æ‹©æœ€ä¼˜æ¨¡å‹ï¼‰

3. **æ’ä»¶ç³»ç»Ÿ**
   - æ”¯æŒè‡ªå®šä¹‰ Action
   - æ’ä»¶å¸‚åœº

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [é¡¹ç›®éœ€æ±‚æ–‡æ¡£ (PRD)](../Launchbox_PRD.md)
- [å®ç°æ€»ç»“](../IMPLEMENTATION_SUMMARY.md)
- [ä¼˜åŒ–æ€»ç»“](OPTIMIZATION_SUMMARY.md)
- [æ–‡ä»¶è¯´æ˜](FILE_EXPLANATION.md)

---

**æ–‡æ¡£ç‰ˆæœ¬**: 2.0  
**æœ€åæ›´æ–°**: 2025-10-17  
**ç»´æŠ¤è€…**: Development Team

