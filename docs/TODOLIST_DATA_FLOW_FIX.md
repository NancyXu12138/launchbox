# TodoListæ•°æ®æµä¿®å¤æ€»ç»“

## ğŸ“‹ é—®é¢˜æè¿°

ç”¨æˆ·åœ¨æµ‹è¯•"ğŸ“Š æ•°å­¦è®¡ç®—åŠ©æ‰‹"æŒ‡ä»¤æ—¶å‘ç°ä¸¤ä¸ªå…³é”®é—®é¢˜ï¼š

### é—®é¢˜1: ç¬¬ä¸€æ­¥é”™è¯¯åœ°è¦æ±‚ç”¨æˆ·è¾“å…¥

**ç°è±¡**:
```
ç”¨æˆ·è¾“å…¥: "è®¡ç®— 8*8*9*123+567-1232/890*10"
æ­¥éª¤1: "æå–ç”¨æˆ·è¾“å…¥çš„æ•°å­¦è¡¨è¾¾å¼"
ç³»ç»Ÿå›å¤: "æ‚¨å¥½ï¼ä¸ºäº†å¸®åŠ©æ‚¨è§£å†³é—®é¢˜ï¼Œè¯·æä¾›æ‚¨æƒ³è¦è®¡ç®—çš„æ•°å­¦è¡¨è¾¾å¼ã€‚è¿™æ ·æˆ‘æ‰èƒ½æ›´å‡†ç¡®åœ°å¸®åŠ©æ‚¨ã€‚è°¢è°¢ï¼"
```

**é—®é¢˜åˆ†æ**:
- ç”¨æˆ·å·²ç»åœ¨åŸå§‹è¾“å…¥ä¸­æä¾›äº†è¡¨è¾¾å¼
- ç³»ç»Ÿä¸åº”è¯¥å†æ¬¡è¯¢é—®
- åº”è¯¥ç›´æ¥ä»ç”¨æˆ·è¾“å…¥ä¸­æå–è¡¨è¾¾å¼

**æ ¹æœ¬åŸå› **:
æ­¥éª¤"æå–ç”¨æˆ·è¾“å…¥çš„æ•°å­¦è¡¨è¾¾å¼"è¢«é”™è¯¯è¯†åˆ«ä¸º`user_input`ä»»åŠ¡ç±»å‹ï¼Œå› ä¸ºå®ƒåŒ…å«"è¾“å…¥"å…³é”®è¯ã€‚

---

### é—®é¢˜2: ç¬¬ä¸‰æ­¥æŠ¥å‘Šä½¿ç”¨å‡æ•°æ®

**ç°è±¡**:
```
æ­¥éª¤3: "ç”ŸæˆåŒ…å«è¯¦ç»†æ­¥éª¤çš„è®¡ç®—æŠ¥å‘Š"
ç”Ÿæˆçš„å†…å®¹ä½¿ç”¨äº†å‡è®¾çš„ä¾‹å­: "2 + 3 * (7 - 5)^2"
è€Œä¸æ˜¯çœŸå®çš„: "8*8*9*123+567-1232/890*10" å’Œç»“æœ "71401.16"
```

**é—®é¢˜åˆ†æ**:
- æ­¥éª¤1çš„ç»“æœ: æˆåŠŸæå–è¡¨è¾¾å¼ "8*8*9*123+567-1232/890*10"
- æ­¥éª¤2çš„ç»“æœ: è®¡ç®—æˆåŠŸï¼Œç»“æœä¸º 71401.16
- æ­¥éª¤3åº”è¯¥ä½¿ç”¨è¿™äº›çœŸå®æ•°æ®ï¼Œä½†å®é™…ä¸ŠLLMç¼–é€ äº†å‡æ•°æ®

**æ ¹æœ¬åŸå› **:
`executeWithLLM`æ–¹æ³•åœ¨æ„å»ºLLMæç¤ºè¯æ—¶ï¼Œ**æ²¡æœ‰åŒ…å«å‰ç½®æ­¥éª¤çš„ç»“æœå’Œç”¨æˆ·åŸå§‹è¾“å…¥**ï¼Œå¯¼è‡´LLMåœ¨æ²¡æœ‰ä¸Šä¸‹æ–‡çš„æƒ…å†µä¸‹è‡ªå·±ç¼–é€ ç¤ºä¾‹ã€‚

---

## âœ… ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤1: ä¼˜åŒ–ä»»åŠ¡ç±»å‹åˆ†ç±»é€»è¾‘

**æ–‡ä»¶**: `/Users/xunanxi/Desktop/GameAgent/src/services/simpleTodoGenerator.ts`

**ä¿®æ”¹**: åœ¨`classifyTaskType`å‡½æ•°ä¸­æ·»åŠ "æå–"ç±»ä»»åŠ¡çš„ä¼˜å…ˆè¯†åˆ«

```typescript
// ğŸ†• æ£€æŸ¥æ˜¯å¦æ˜¯"æå–"ç±»ä»»åŠ¡ï¼ˆä»å·²æœ‰ä¿¡æ¯ä¸­æå–ï¼Œä¸éœ€è¦ç”¨æˆ·è¾“å…¥ï¼‰
const extractKeywords = ['æå–', 'è§£æ', 'è¯†åˆ«', 'åˆ†æ', 'æ£€æµ‹'];
if (extractKeywords.some(keyword => text.includes(keyword))) {
  return 'llm'; // æå–ç±»ä»»åŠ¡ä½¿ç”¨LLMå¤„ç†ï¼Œä¸éœ€è¦ç”¨æˆ·è¾“å…¥
}

// æ£€æŸ¥æ˜¯å¦éœ€è¦ç”¨æˆ·è¾“å…¥ï¼ˆçœŸæ­£éœ€è¦ç”¨æˆ·äº¤äº’çš„åœºæ™¯ï¼‰
const userInputKeywords = [
  'è¯¢é—®ç”¨æˆ·', 'è®©ç”¨æˆ·', 'è¯·ç”¨æˆ·', 'ç”¨æˆ·é€‰æ‹©', 'ç”¨æˆ·ç¡®è®¤',
  'å‘Šè¯‰æˆ‘ä½ çš„', 'ä½ æƒ³è¦', 'ä½ å¸Œæœ›', 'ä½ çš„åå¥½'
];
```

**æ•ˆæœ**:
- âœ… "æå–ç”¨æˆ·è¾“å…¥çš„æ•°å­¦è¡¨è¾¾å¼" â†’ `llm`ç±»å‹ï¼ˆä¸ä¼šclarifyï¼‰
- âœ… "è¯¢é—®ç”¨æˆ·é€‰æ‹©æ–¹æ¡ˆ" â†’ `user_input`ç±»å‹ï¼ˆä¼šclarifyï¼‰
- âœ… "è§£æJSONæ•°æ®" â†’ `llm`ç±»å‹ï¼ˆä¸ä¼šclarifyï¼‰
- âœ… "è®©ç”¨æˆ·ç¡®è®¤ä¿¡æ¯" â†’ `user_input`ç±»å‹ï¼ˆä¼šclarifyï¼‰

---

### ä¿®å¤2: å®Œå–„LLMæ‰§è¡Œçš„ä¸Šä¸‹æ–‡ä¼ é€’

**æ–‡ä»¶**: `/Users/xunanxi/Desktop/GameAgent/src/services/todoExecutionService.ts`

**ä¿®æ”¹**: é‡å†™`executeWithLLM`æ–¹æ³•ï¼Œæ·»åŠ å®Œæ•´çš„ä¸Šä¸‹æ–‡ä¼ é€’

#### 2.1 å‰ç½®æ­¥éª¤ç»“æœä¼ é€’

```typescript
// ğŸ†• æ„å»ºå‰ç½®ç»“æœä¸Šä¸‹æ–‡ï¼ˆå®Œæ•´çš„æ•°æ®ä¼ é€’ï¼‰
let previousContext = '';
if (this.results.length > 0) {
  previousContext = '\n\nã€å‰ç½®æ­¥éª¤çš„æ‰§è¡Œç»“æœã€‘\n';
  this.results.forEach((r, i) => {
    const resultData = r.executionResult?.result;
    previousContext += `\næ­¥éª¤${i + 1}: ${r.stepText}\n`;
    
    if (resultData) {
      if (typeof resultData === 'object') {
        // æå–å…³é”®å­—æ®µï¼šresult, response, answer, data
        if ('result' in resultData) {
          previousContext += `ç»“æœ: ${resultData.result}\n`;
        } else if ('response' in resultData) {
          previousContext += `ç»“æœ: ${resultData.response}\n`;
        } else if ('answer' in resultData) {
          previousContext += `ç»“æœ: ${resultData.answer}\n`;
        } else if ('data' in resultData) {
          previousContext += `ç»“æœ: ${JSON.stringify(resultData.data)}\n`;
        } else {
          previousContext += `ç»“æœ: ${JSON.stringify(resultData)}\n`;
        }
      } else {
        previousContext += `ç»“æœ: ${resultData}\n`;
      }
    }
  });
}
```

**æ•°æ®æµç¤ºä¾‹**:
```
æ­¥éª¤1: "æå–ç”¨æˆ·è¾“å…¥çš„æ•°å­¦è¡¨è¾¾å¼"
  â†’ ç»“æœ: "8*8*9*123+567-1232/890*10"

æ­¥éª¤2: "ä½¿ç”¨è®¡ç®—å™¨å·¥å…·è®¡ç®—ç»“æœ"
  â†’ ç»“æœ: 71401.16

æ­¥éª¤3: "ç”ŸæˆåŒ…å«è¯¦ç»†æ­¥éª¤çš„è®¡ç®—æŠ¥å‘Š"
  â†’ æ¥æ”¶åˆ°å‰ç½®ç»“æœ:
    æ­¥éª¤1: æå–ç”¨æˆ·è¾“å…¥çš„æ•°å­¦è¡¨è¾¾å¼
    ç»“æœ: 8*8*9*123+567-1232/890*10
    
    æ­¥éª¤2: ä½¿ç”¨è®¡ç®—å™¨å·¥å…·è®¡ç®—ç»“æœ
    ç»“æœ: 71401.16
```

#### 2.2 ç”¨æˆ·åŸå§‹è¾“å…¥ä¼ é€’

```typescript
// ğŸ†• æ„å»ºç”¨æˆ·è¾“å…¥ä¸Šä¸‹æ–‡
const userContext = this.userOriginalInput ? 
  `\n\nã€ç”¨æˆ·çš„åŸå§‹è¯·æ±‚ã€‘\n${this.userOriginalInput}` : '';
```

**æ•°æ®æµç¤ºä¾‹**:
```
ç”¨æˆ·è¾“å…¥: "è®¡ç®— 8*8*9*123+567-1232/890*10"

æ­¥éª¤3æ¥æ”¶åˆ°çš„å®Œæ•´ä¸Šä¸‹æ–‡:
- ç”¨æˆ·åŸå§‹è¯·æ±‚: "è®¡ç®— 8*8*9*123+567-1232/890*10"
- æ­¥éª¤1ç»“æœ: "8*8*9*123+567-1232/890*10"
- æ­¥éª¤2ç»“æœ: 71401.16
```

#### 2.3 å¢å¼ºçš„LLMæç¤ºè¯

```typescript
const prompt = `ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹ï¼Œæ­£åœ¨æ‰§è¡Œå¤šæ­¥éª¤ä»»åŠ¡çš„å…¶ä¸­ä¸€æ­¥ã€‚

ã€å½“å‰ä»»åŠ¡ã€‘
${step.text}${userContext}${previousContext}${knowledgeContext}

ã€é‡è¦æç¤ºã€‘
1. å¦‚æœå‰ç½®æ­¥éª¤æä¾›äº†æ•°æ®ï¼Œè¯·åŠ¡å¿…ä½¿ç”¨è¿™äº›çœŸå®æ•°æ®
2. å¦‚æœç”¨æˆ·åŸå§‹è¯·æ±‚åŒ…å«äº†æ‰€éœ€ä¿¡æ¯ï¼Œè¯·ä»ä¸­æå–
3. ä¸è¦ç¼–é€ æˆ–å‡è®¾æ•°æ®ï¼Œåªä½¿ç”¨å·²æä¾›çš„çœŸå®ä¿¡æ¯
4. å¦‚æœéœ€è¦æå–ä¿¡æ¯ï¼Œè¯·ä»ç”¨æˆ·åŸå§‹è¯·æ±‚æˆ–å‰ç½®æ­¥éª¤ç»“æœä¸­æå–
5. å¦‚æœæ˜¯ç”ŸæˆæŠ¥å‘Š/æ€»ç»“ï¼Œè¯·åŸºäºå‰ç½®æ­¥éª¤çš„çœŸå®ç»“æœ

è¯·å®Œæˆå½“å‰ä»»åŠ¡ï¼š`;
```

**æ•ˆæœ**:
- âœ… LLMçœ‹åˆ°å®Œæ•´çš„ä¸Šä¸‹æ–‡
- âœ… LLMçŸ¥é“è¦ä½¿ç”¨çœŸå®æ•°æ®
- âœ… LLMä¸ä¼šç¼–é€ å‡æ•°æ®

---

## ğŸ”„ å®Œæ•´çš„æ•°æ®æµï¼ˆä¿®å¤åï¼‰

### ç¤ºä¾‹ï¼šæ•°å­¦è®¡ç®—åŠ©æ‰‹

```
1. ç”¨æˆ·è¾“å…¥
   â†“
   "è®¡ç®— 8*8*9*123+567-1232/890*10"
   â†“
   [å­˜å‚¨åˆ° TodoExecutor.userOriginalInput]

2. ç”ŸæˆTodoList
   â†“
   æ­¥éª¤1: "æå–ç”¨æˆ·è¾“å…¥çš„æ•°å­¦è¡¨è¾¾å¼" [llmç±»å‹] âœ…
   æ­¥éª¤2: "ä½¿ç”¨è®¡ç®—å™¨å·¥å…·è®¡ç®—ç»“æœ" [actionç±»å‹]
   æ­¥éª¤3: "ç”ŸæˆåŒ…å«è¯¦ç»†æ­¥éª¤çš„è®¡ç®—æŠ¥å‘Š" [llmç±»å‹]

3. æ‰§è¡Œæ­¥éª¤1 (llmç±»å‹)
   â†“
   executeWithLLM() æ¥æ”¶åˆ°:
   - å½“å‰ä»»åŠ¡: "æå–ç”¨æˆ·è¾“å…¥çš„æ•°å­¦è¡¨è¾¾å¼"
   - ç”¨æˆ·åŸå§‹è¯·æ±‚: "è®¡ç®— 8*8*9*123+567-1232/890*10" âœ…
   - å‰ç½®æ­¥éª¤: æ— 
   â†“
   LLMæå–: "8*8*9*123+567-1232/890*10" âœ…
   â†“
   [å­˜å‚¨åˆ° this.results[0]]

4. æ‰§è¡Œæ­¥éª¤2 (actionç±»å‹)
   â†“
   executeActionTask() â†’ executeCodeAction()
   â†“
   extractExecutionParams() æ¥æ”¶åˆ°:
   - ç”¨æˆ·åŸå§‹è¯·æ±‚: "è®¡ç®— 8*8*9*123+567-1232/890*10" âœ…
   - å‰ç½®æ­¥éª¤1ç»“æœ: "8*8*9*123+567-1232/890*10" âœ…
   â†“
   æå–è¡¨è¾¾å¼: "8*8*9*123+567-1232/890*10"
   â†“
   è°ƒç”¨calculatorå·¥å…·
   â†“
   è¿”å›ç»“æœ: 71401.16 âœ…
   â†“
   [å­˜å‚¨åˆ° this.results[1]]

5. æ‰§è¡Œæ­¥éª¤3 (llmç±»å‹)
   â†“
   executeWithLLM() æ¥æ”¶åˆ°:
   - å½“å‰ä»»åŠ¡: "ç”ŸæˆåŒ…å«è¯¦ç»†æ­¥éª¤çš„è®¡ç®—æŠ¥å‘Š"
   - ç”¨æˆ·åŸå§‹è¯·æ±‚: "è®¡ç®— 8*8*9*123+567-1232/890*10" âœ…
   - å‰ç½®æ­¥éª¤1: è¡¨è¾¾å¼ = "8*8*9*123+567-1232/890*10" âœ…
   - å‰ç½®æ­¥éª¤2: ç»“æœ = 71401.16 âœ…
   â†“
   LLMç”ŸæˆæŠ¥å‘Šï¼ˆåŸºäºçœŸå®æ•°æ®ï¼‰:
   "æ•°å­¦è¡¨è¾¾å¼: 8*8*9*123+567-1232/890*10
    è®¡ç®—ç»“æœ: 71401.16
    è¯¦ç»†æ­¥éª¤:
    1. å…ˆè®¡ç®—ä¹˜æ³•: 8*8 = 64
    2. ç»§ç»­ä¹˜æ³•: 64*9 = 576
    ..." âœ…
   â†“
   [å­˜å‚¨åˆ° this.results[2]]

6. å®Œæˆï¼
```

---

## ğŸ“Š ä¿®å¤å‰åå¯¹æ¯”

| åœºæ™¯ | ä¿®å¤å‰ | ä¿®å¤å |
|------|--------|--------|
| **æ­¥éª¤1ç±»å‹** | `user_input`ï¼ˆé”™è¯¯ï¼‰ | `llm`ï¼ˆæ­£ç¡®ï¼‰ âœ… |
| **æ­¥éª¤1è¡Œä¸º** | è¯¢é—®ç”¨æˆ·æä¾›è¡¨è¾¾å¼ | ç›´æ¥ä»ç”¨æˆ·è¾“å…¥æå– âœ… |
| **æ­¥éª¤3æ¥æ”¶æ•°æ®** | æ— ä¸Šä¸‹æ–‡ | å®Œæ•´çš„å‰ç½®ç»“æœ+ç”¨æˆ·è¾“å…¥ âœ… |
| **æ­¥éª¤3ç”Ÿæˆå†…å®¹** | ç¼–é€ å‡æ•°æ® | ä½¿ç”¨çœŸå®æ•°æ® âœ… |
| **ç”¨æˆ·ä½“éªŒ** | éœ€è¦é‡å¤è¾“å…¥ï¼Œç»“æœä¸å‡†ç¡® | ä¸€æ¬¡è¾“å…¥ï¼Œå‡†ç¡®ç»“æœ âœ… |

---

## ğŸ¯ æ ¸å¿ƒæ”¹è¿›

### 1. æ™ºèƒ½ä»»åŠ¡ç±»å‹è¯†åˆ«

**å…³é”®é€»è¾‘**:
```
æ£€æŸ¥é¡ºåº:
1. èƒ½å¦ç”¨actionå·¥å…·å¤„ç†ï¼Ÿ â†’ action
2. æ˜¯å¦æ˜¯"æå–"ç±»ä»»åŠ¡ï¼Ÿ â†’ llm (ğŸ†•)
3. æ˜¯å¦çœŸæ­£éœ€è¦ç”¨æˆ·äº¤äº’ï¼Ÿ â†’ user_input
4. é»˜è®¤ â†’ llm
```

**è¯†åˆ«è§„åˆ™**:
- **æå–ç±»å…³é”®è¯**: æå–ã€è§£æã€è¯†åˆ«ã€åˆ†æã€æ£€æµ‹ â†’ `llm`
- **ç”¨æˆ·äº¤äº’å…³é”®è¯**: è¯¢é—®ç”¨æˆ·ã€è®©ç”¨æˆ·ã€è¯·ç”¨æˆ·ã€ç”¨æˆ·é€‰æ‹©ã€ç”¨æˆ·ç¡®è®¤ â†’ `user_input`

### 2. ä¸‰å±‚æ•°æ®ä¼ é€’

```
Layer 1: ç”¨æˆ·åŸå§‹è¾“å…¥
  â†“ (å­˜å‚¨åœ¨ TodoExecutor.userOriginalInput)
  â†“ (ä¼ é€’ç»™æ¯ä¸ªæ­¥éª¤çš„æ‰§è¡Œå‡½æ•°)
  
Layer 2: å‰ç½®æ­¥éª¤ç»“æœ
  â†“ (å­˜å‚¨åœ¨ TodoExecutor.results)
  â†“ (ç´¯ç§¯ä¼ é€’)
  
Layer 3: çŸ¥è¯†åº“ä¿¡æ¯
  â†“ (åŠ¨æ€æœç´¢)
  â†“ (è¡¥å……ä¸Šä¸‹æ–‡)
```

### 3. æ˜ç¡®çš„æ•°æ®ä½¿ç”¨æŒ‡å¼•

LLMæç¤ºè¯ä¸­æ˜ç¡®è¦æ±‚ï¼š
1. âœ… ä½¿ç”¨å‰ç½®æ­¥éª¤æä¾›çš„çœŸå®æ•°æ®
2. âœ… ä»ç”¨æˆ·åŸå§‹è¯·æ±‚ä¸­æå–ä¿¡æ¯
3. âŒ ä¸è¦ç¼–é€ æˆ–å‡è®¾æ•°æ®
4. âœ… åŸºäºçœŸå®ç»“æœç”ŸæˆæŠ¥å‘Š

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•ç”¨ä¾‹1: æ•°å­¦è®¡ç®—åŠ©æ‰‹

**è¾“å…¥**:
```
ç”¨æˆ·é€‰æ‹©æŒ‡ä»¤: "ğŸ“Š æ•°å­¦è®¡ç®—åŠ©æ‰‹"
ç”¨æˆ·è¾“å…¥: "è®¡ç®— 8*8*9*123+567-1232/890*10"
```

**é¢„æœŸæµç¨‹**:
```
âœ… æ­¥éª¤1: ç›´æ¥ä»ç”¨æˆ·è¾“å…¥æå– "8*8*9*123+567-1232/890*10"
âœ… æ­¥éª¤2: è°ƒç”¨calculatorè®¡ç®— = 71401.16
âœ… æ­¥éª¤3: åŸºäºçœŸå®æ•°æ®ç”ŸæˆæŠ¥å‘Š
```

**é¢„æœŸç»“æœ**:
```markdown
# æ•°å­¦è¡¨è¾¾å¼è®¡ç®—æŠ¥å‘Š

## è¡¨è¾¾å¼
8*8*9*123+567-1232/890*10

## è®¡ç®—ç»“æœ
71401.16

## è¯¦ç»†æ­¥éª¤
1. é¦–å…ˆè®¡ç®—ä¹˜æ³•è¿ç®—: 8 Ã— 8 = 64
2. ç»§ç»­ä¹˜æ³•: 64 Ã— 9 = 576
3. ç»§ç»­ä¹˜æ³•: 576 Ã— 123 = 70848
...
```

### æµ‹è¯•ç”¨ä¾‹2: æ–‡æœ¬åˆ†æå·¥ä½œæµ

**è¾“å…¥**:
```
ç”¨æˆ·é€‰æ‹©æŒ‡ä»¤: "ğŸ“ æ–‡æœ¬åˆ†æå·¥ä½œæµ"
ç”¨æˆ·è¾“å…¥: "åˆ†æè¿™æ®µæ–‡æœ¬ï¼šä»Šå¤©å¤©æ°”çœŸå¥½ï¼Œé˜³å…‰æ˜åªšï¼Œå¿ƒæƒ…æ„‰å¿«ã€‚"
```

**é¢„æœŸæµç¨‹**:
```
âœ… æ­¥éª¤1: ä»ç”¨æˆ·è¾“å…¥æå–æ–‡æœ¬
âœ… æ­¥éª¤2: è°ƒç”¨text_processorç»Ÿè®¡
âœ… æ­¥éª¤3: è°ƒç”¨sentiment_analysisåˆ†æ
âœ… æ­¥éª¤4: åŸºäºå‰ä¸¤æ­¥ç»“æœç”ŸæˆæŠ¥å‘Š
```

---

## ğŸ“ å…³é”®ä»£ç ç‰‡æ®µ

### classifyTaskType (ç®€åŒ–ç‰ˆ)

```typescript
function classifyTaskType(stepText: string): TodoTaskType {
  // 1. ä¼˜å…ˆï¼šactionå·¥å…·
  if (selectBestAction(stepText)) return 'action';
  
  // 2. ğŸ†• æå–ç±»ä»»åŠ¡ â†’ llm
  if (['æå–', 'è§£æ', 'è¯†åˆ«', 'åˆ†æ', 'æ£€æµ‹'].some(k => stepText.includes(k))) {
    return 'llm';
  }
  
  // 3. ç”¨æˆ·äº¤äº’ â†’ user_input
  if (['è¯¢é—®ç”¨æˆ·', 'è®©ç”¨æˆ·', 'è¯·ç”¨æˆ·'].some(k => stepText.includes(k))) {
    return 'user_input';
  }
  
  // 4. é»˜è®¤ â†’ llm
  return 'llm';
}
```

### executeWithLLM (æ ¸å¿ƒä¿®æ”¹)

```typescript
private async executeWithLLM(step: SimpleTodoItem, startTime: number) {
  // ğŸ†• æ„å»ºå®Œæ•´ä¸Šä¸‹æ–‡
  const previousContext = this.buildPreviousContext();
  const userContext = this.buildUserContext();
  const knowledgeContext = await this.buildKnowledgeContext(step.text);
  
  // ğŸ†• å¢å¼ºæç¤ºè¯
  const prompt = `
ã€å½“å‰ä»»åŠ¡ã€‘${step.text}
${userContext}
${previousContext}
${knowledgeContext}

ã€é‡è¦ã€‘ä½¿ç”¨çœŸå®æ•°æ®ï¼Œä¸è¦ç¼–é€ ï¼
`;
  
  const response = await this.callLLM(prompt, 2000);
  return response;
}
```

---

## ğŸ‰ ä¿®å¤å®Œæˆ

âœ… **é—®é¢˜1å·²è§£å†³**: "æå–"ç±»ä»»åŠ¡ä¸å†é”™è¯¯åœ°è¦æ±‚ç”¨æˆ·è¾“å…¥
âœ… **é—®é¢˜2å·²è§£å†³**: LLMæ­¥éª¤ç°åœ¨èƒ½æ­£ç¡®æ¥æ”¶å’Œä½¿ç”¨å‰ç½®æ­¥éª¤çš„ç»“æœ
âœ… **æ— Linteré”™è¯¯**: æ‰€æœ‰ä»£ç é€šè¿‡TypeScriptç±»å‹æ£€æŸ¥
âœ… **å‘åå…¼å®¹**: ä¸å½±å“ç°æœ‰å…¶ä»–æŒ‡ä»¤çš„æ‰§è¡Œ

---

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

1. **æµ‹è¯•æ‰€æœ‰8ä¸ªæŒ‡ä»¤æ¨¡æ¿**
   - éªŒè¯æ•°æ®ä¼ é€’åœ¨æ‰€æœ‰åœºæ™¯ä¸‹éƒ½æ­£ç¡®
   
2. **æ·»åŠ è°ƒè¯•é¢æ¿**
   - æ˜¾ç¤ºæ¯ä¸ªæ­¥éª¤æ¥æ”¶åˆ°çš„ä¸Šä¸‹æ–‡
   - å¸®åŠ©ç”¨æˆ·ç†è§£æ•°æ®æµ
   
3. **ä¼˜åŒ–æ•°æ®æ‘˜è¦**
   - å¯¹äºè¶…é•¿ç»“æœï¼Œæ™ºèƒ½æå–å…³é”®ä¿¡æ¯
   - é¿å…ä¸Šä¸‹æ–‡è¿‡é•¿
   
4. **æ·»åŠ æ•°æ®éªŒè¯**
   - æ£€æŸ¥å‰ç½®æ­¥éª¤ç»“æœçš„å®Œæ•´æ€§
   - ç¼ºå¤±æ—¶æä¾›å‹å¥½æç¤º

---

**æœ€åæ›´æ–°**: 2025-01-21
**ä¿®å¤ç‰ˆæœ¬**: v2.1
**çŠ¶æ€**: âœ… å·²ä¿®å¤å¹¶å‡†å¤‡æµ‹è¯•

